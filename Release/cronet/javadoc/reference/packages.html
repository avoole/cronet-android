<!-- ################        DO NOT EDIT THIS FILE.          ################# -->
<!-- ################                                        ################# -->
<!-- ################          IT IS GENERATED.              ################# -->
<!-- ################                                        ################# -->
<!-- ################   INSTEAD EDIT THE JAVADOC COMMENTS.   ################# -->

<!DOCTYPE html>










<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico" />
<title>

  Package Index - Cronet API |

Doclava

</title>
<link href="../assets/doclava-developer-docs.css" rel="stylesheet" type="text/css" />
<link href="../assets/customizations.css" rel="stylesheet" type="text/css" />
<script src="../assets/search_autocomplete.js" type="text/javascript"></script>
<script src="../assets/jquery-resizable.min.js" type="text/javascript"></script>
<script src="../assets/doclava-developer-docs.js" type="text/javascript"></script>
<script src="../assets/prettify.js" type="text/javascript"></script>
<script type="text/javascript">
  setToRoot("../");
</script>
<script src="../assets/doclava-developer-reference.js" type="text/javascript"></script>
<script src="../navtree_data.js" type="text/javascript"></script>
<script src="../assets/customizations.js" type="text/javascript"></script>
<noscript>
  <style type="text/css">
    html,body{overflow:auto;}
    #body-content{position:relative; top:0;}
    #doc-content{overflow:visible;border-left:3px solid #666;}
    #side-nav{padding:0;}
    #side-nav .toggle-list ul {display:block;}
    #resize-packages-nav{border-bottom:3px solid #666;}
  </style>
</noscript>
</head>

<body class="gc-documentation">

<div id="header">
    <div id="headerLeft">
      
    </div>
    <div id="headerRight">
        
  <div id="search" >
      <div id="searchForm">
          <form accept-charset="utf-8" class="gsc-search-box" 
                onsubmit="return submit_search()">
            <table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody>
                <tr>
                  <td class="gsc-input">
                    <input id="search_autocomplete" class="gsc-input" type="text" size="33" autocomplete="off"
                      title="search developer docs" name="q"
                      value="search developer docs"
                      onFocus="search_focus_changed(this, true)"
                      onBlur="search_focus_changed(this, false)"
                      onkeydown="return search_changed(event, true, '../')"
                      onkeyup="return search_changed(event, false, '../')" />
                  <div id="search_filtered_div" class="no-display">
                      <table id="search_filtered" cellspacing=0>
                      </table>
                  </div>
                  </td>
                  <td class="gsc-search-button">
                    <input type="submit" value="Search" title="search" id="search-button" class="gsc-search-button" />
                  </td>
                  <td class="gsc-clear-button">
                    <div title="clear results" class="gsc-clear-button">&nbsp;</div>
                  </td>
                </tr></tbody>
              </table>
          </form>
      </div><!-- searchForm -->
  </div><!-- search -->
    </div><!-- headerRight -->
</div><!-- header -->


  <div class="g-section g-tpl-240" id="body-content">
    <div class="g-unit g-first side-nav-resizable" id="side-nav">
      <div id="swapper">
        <div id="nav-panels">
          <div id="resize-packages-nav">
            <div id="packages-nav">
              <div id="index-links"><nobr>
                <a href="../reference/packages.html"  >Package Index</a> | 
                <a href="../reference/classes.html" >Class Index</a></nobr>
              </div>
              <ul>
                
    <li class="api apilevel-">
  <a href="../reference/org/chromium/net/package-summary.html">org.chromium.net</a></li>
              </ul><br/>
            </div> <!-- end packages -->
          </div> <!-- end resize-packages -->
          <div id="classes-nav">
              <script>
                /*addLoadEvent(maxPackageHeight);*/
              </script>
              <p style="padding:10px">Select a package to view its members</p><br/>
          </div><!-- end classes -->
        </div><!-- end nav-panels -->
        <div id="nav-tree" style="display:none">
          <div id="index-links"><nobr>
            <a href="../reference/packages.html"  >Package Index</a> | 
            <a href="../reference/classes.html" >Class Index</a></nobr>
          </div>
        </div><!-- end nav-tree -->
      </div><!-- end swapper -->
    </div> <!-- end side-nav -->
    <script>
      if (!isMobile) {
        $("<a href='#' id='nav-swap' onclick='swapNav();return false;' style='font-size:10px;line-height:9px;margin-left:1em;text-decoration:none;'><span id='tree-link'>Use Tree Navigation</span><span id='panel-link' style='display:none'>Use Panel Navigation</span></a>").appendTo("#side-nav");
        chooseDefaultNav();
        if ($("#nav-tree").is(':visible')) {
          init_default_navtree("../");
        } else {
          addLoadEvent(function() {
            scrollIntoView("packages-nav");
            scrollIntoView("classes-nav");
          });
        }
        $("#swapper").css({borderBottom:"2px solid #aaa"});
      } else {
        swapNav(); // tree view should be used on mobile
      }
    </script>



<div class="g-unit" id="doc-content">

<div id="jd-header">
<h1>Package Index - Cronet API</h1>
</div>

<div id="jd-content">

<div class="jd-descr">
<p><h1>Quick Start Guide to Using Cronet</h1>
<p>Cronet is the networking stack of Chromium put into a library for use on
mobile. This is the same networking stack that is used in the Chrome browser
by over a billion people. It offers an easy-to-use, high performance,
standards-compliant, and secure way to perform HTTP requests. Cronet has support
for both Android and iOS. On Android, Cronet offers its own Java asynchronous
API as well as support for the <a href="https://developer.android.com/reference/java/net/HttpURLConnection.html">java.net.HttpURLConnection</a> API.
This document gives a brief introduction to using these two Java APIs.</p>
<p>For instructions on checking out and building Cronet see
<a href="build_instructions.md">Cronet build instructions</a>.</p>
<p>Testing information is available on the <a href="native/test_instructions.md">native
API</a> and <a href="android/test_instructions.md">Android
API</a> pages.</p>
<h3>Basics</h3>
<p>First you will need to extend <code>UrlRequest.Callback</code> to handle
events during the lifetime of a request. For example:</p>
<pre><code>class MyCallback extends UrlRequest.Callback {
    &commat;Override
    public void onRedirectReceived(UrlRequest request,
            UrlResponseInfo responseInfo, String newLocationUrl) {
        if (followRedirect) {
            // Let's tell Cronet to follow the redirect!
            request.followRedirect();
        } else {
            // Not worth following the redirect? Abandon the request.
            request.cancel();
        }
    }

    &commat;Override
    public void onResponseStarted(UrlRequest request,
            UrlResponseInfo responseInfo) {
         // Now we have response headers!
         int httpStatusCode = responseInfo.getHttpStatusCode();
         if (httpStatusCode == 200) {
             // Success! Let's tell Cronet to read the response body.
             request.read(myBuffer);
         } else if (httpStatusCode == 503) {
             // Do something. Note that 4XX and 5XX are not considered
             // errors from Cronet's perspective since the response is
             // successfully read.
         }
         mResponseHeaders = responseInfo.getAllHeaders();
    }

    &commat;Override
    public void onReadCompleted(UrlRequest request,
            UrlResponseInfo responseInfo, ByteBuffer byteBuffer) {
         // Response body is available.
         doSomethingWithResponseData(byteBuffer);
         // Let's tell Cronet to continue reading the response body or
         // inform us that the response is complete!
         request.read(mBuffer);
    }

    &commat;Override
    public void onSucceeded(UrlRequest request,
            UrlResponseInfo responseInfo) {
         // Request has completed successfully!
    }

    &commat;Override
    public void onFailed(UrlRequest request,
            UrlResponseInfo responseInfo, CronetException error) {
         // Request has failed. responseInfo might be null.
         Log.e("MyCallback", "Request failed. " + error.getMessage());
         // Maybe handle error here. Typical errors include hostname
         // not resolved, connection to server refused, etc.
    }
}
</code></pre>
<p>Make a request like this:</p>
<pre><code>CronetEngine.Builder engineBuilder = new CronetEngine.Builder(getContext());
CronetEngine engine = engineBuilder.build();
Executor executor = Executors.newSingleThreadExecutor();
MyCallback callback = new MyCallback();
UrlRequest.Builder requestBuilder = engine.newUrlRequestBuilder(
        "https://www.example.com", callback, executor);
UrlRequest request = requestBuilder.build();
request.start();
</code></pre>
<p>In the above example, <code>MyCallback</code> extends <code>UrlRequest.Callback</code>. The request
is started asynchronously. When the response is ready (fully or partially), and
in the event of failures or redirects, <code>callback</code>'s methods will be invoked on
<code>executor</code>'s thread to inform the client of the request state and/or response
information.</p>
<h3>Downloading Data</h3>
<p>When Cronet fetches response headers from the server or gets them from the
cache, <code>UrlRequest.Callback.onResponseStarted</code> will be invoked. To read the
response body, the client should call <code>UrlRequest.read</code> and supply a
<a href="https://developer.android.com/reference/java/nio/ByteBuffer.html">ByteBuffer</a> for Cronet to fill. Once a portion or all of
the response body is read, <code>UrlRequest.Callback.onReadCompleted</code> will be invoked.
The client may then read and consume the data within <code>byteBuffer</code>.
Once the client is ready to consume more data, the client should call
<code>UrlRequest.read</code> again. The process continues until
<code>UrlRequest.Callback.onSucceeded</code> or <code>UrlRequest.Callback.onFailed</code> is invoked,
which signals the completion of the request.</p>
<h3>Uploading Data</h3>
<pre><code>MyUploadDataProvider myUploadDataProvider = new MyUploadDataProvider();
requestBuilder.setHttpMethod("POST");
requestBuilder.setUploadDataProvider(myUploadDataProvider, executor);
</code></pre>
<p>In the above example, <code>MyUploadDataProvider</code> extends <code>UploadDataProvider</code>.
When Cronet is ready to send the request body,
<code>myUploadDataProvider.read(UploadDataSink uploadDataSink,
ByteBuffer byteBuffer)</code> will be invoked. The client will need to write the
request body into <code>byteBuffer</code>. Once the client is done writing into
<code>byteBuffer</code>, the client can let Cronet know by calling
<code>uploadDataSink.onReadSucceeded</code>. If the request body doesn't fit into
<code>byteBuffer</code>, the client can continue writing when <code>UploadDataProvider.read</code> is
invoked again. For more details, please see the API reference.</p>
<h3><a id=configuring-cronet></a> Configuring Cronet</h3>
<p>Various configuration options are available via the <code>CronetEngine.Builder</code>
object.</p>
<p>Enabling HTTP/2 and QUIC:</p>
<ul>
<li>
<p>For Example:</p>
<pre><code>engineBuilder.enableHttp2(true).enableQuic(true);
</code></pre>
</li>
</ul>
<p>Controlling the cache:</p>
<ul>
<li>
<p>Use a 100KiB in-memory cache:</p>
<pre><code>engineBuilder.enableHttpCache(
        CronetEngine.Builder.HttpCache.IN_MEMORY, 100 * 1024);
</code></pre>
</li>
<li>
<p>or use a 1MiB disk cache:</p>
<pre><code>engineBuilder.setStoragePath(storagePathString);
engineBuilder.enableHttpCache(CronetEngine.Builder.HttpCache.DISK,
        1024 * 1024);
</code></pre>
</li>
</ul>
<h3>Debugging</h3>
<p>To get more information about how Cronet is processing network
requests, you can start and stop <strong>NetLog</strong> logging by calling
<code>CronetEngine.startNetLogToFile</code> and <code>CronetEngine.stopNetLog</code>.
Bear in mind that logs may contain sensitive data. You may analyze the
generated log by navigating to <a href="chrome://net-internals#import">chrome://net-internals#import</a> using a
Chrome browser.</p>
<h1>Using the java.net.HttpURLConnection API</h1>
<p>Cronet offers an implementation of the <a href="https://developer.android.com/reference/java/net/HttpURLConnection.html">java.net.HttpURLConnection</a> API to make
it easier for apps which rely on this API to use Cronet.
To open individual connections using Cronet's implementation, do the following:</p>
<pre><code>HttpURLConnection connection =
        (HttpURLConnection)engine.openConnection(url);
</code></pre>
<p>To use Cronet's implementation instead of the system's default implementation
for all connections established using <code>URL.openConnection()</code> do the following:</p>
<pre><code>URL.setURLStreamHandlerFactory(engine.createURLStreamHandlerFactory());
</code></pre>
<p>Cronet's
HttpURLConnection implementation has some limitations as compared to the system
implementation, including not utilizing the default system HTTP cache (Please
see <code><a href="../reference/org/chromium/net/CronetEngine.html#createURLStreamHandlerFactory()">createURLStreamHandlerFactory()</a></code> for
more information).
You can configure Cronet and control caching through the
<code>CronetEngine.Builder</code> instance, <code>engineBuilder</code>
(See <a href="#configuring-cronet">Configuring Cronet</a> section), before you build the
<code>CronetEngine</code> and then call <code>CronetEngine.createURLStreamHandlerFactory()</code>.</p></p>
</div>


<table class="jd-sumtable">

    <tr class="alt-color api apilevel-" >
        <td class="jd-linkcol">
  <a href="../reference/org/chromium/net/package-summary.html">org.chromium.net</a></td>
        <td class="jd-descrcol" width="100%"></td>
    </tr>


</table>

<div id="footer">

</div> <!-- end footer -->

</div><!-- end jd-content -->
</div> <!-- end doc-content -->

</div> <!-- end body-content --> 

<script type="text/javascript">
init(); /* initialize android-developer-docs.js */
</script>

</body>
</html>
